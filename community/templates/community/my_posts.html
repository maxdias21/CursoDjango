{% extends 'community/base.html' %}
{% block 'title' %}Meus posts{% endblock 'title' %}
{% load humanize %}
{% load static %}

{% block 'additional_content' %}
    <h1 class="forum-title mb-4 text-center mt-3 mb-3">Meus posts</h1>
    {% include 'global/partials/__messages.html' %}
    <div class="row row-cols-1 row-cols-sm-1 row-cols-md-2 row-cols-lg-3 g-4">
{% for post in posts %}
     <div class="card pt-2">
         {% if post.image %}
            <a href="{% url 'community:view_community_post' post.id %}"><img src="{{post.image.url}}" class="img-fluid card-img-top" alt="..."></a>
         {% endif %}
        <div class="card-body">
          <h3 class="card-title">{{post.title}}</h3>
          <p class="card-text">{{post.content | safe}}</p>
        </div>
        <div class="card-footer">
          <small class="text-muted">Publicado {{post.created_at | naturalday}}</small>
        </div>
         <div class="d-grid gap-2">
            <a class="btn btn-success mt-4 mb-2" href="{% url 'community:view_community_post' post.id %}">Leia mais...</a>
             <form class="form-delete" action="{% url 'community:delete_post' post.id %}" method="POST">
                 {% csrf_token %}
                 <input type="hidden" name="id" value="{{post.id}}">
                 <button class="btn btn-danger mt-1 mb-2" style="width:100%;" type="submit">Deletar post</button>
             </form>
        </div>
      </div>
{% empty %}
    <h2  style="text-align: center; margin: 0 auto; margin-top: 30px; font-size: 1.5em; word-break: break-word;">Não há nenhum conteúdo no momento :(</h2>
{% endfor %}
</div>
<div class="mt-3">{% include 'global/partials/__pagination.html' %}</div>
    <!-- Confirmação para deletar post -->
    <script src="{% static 'global/static/script/script.js' %}"></script>
{% endblock 'additional_content' %}
